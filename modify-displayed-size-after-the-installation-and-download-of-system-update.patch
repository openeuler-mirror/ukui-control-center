From e896e60bb4e3eae9fa72cd33d8659b7962883379 Mon Sep 17 00:00:00 2001
From: tanyulong2021 <tanyulong@kylinos.cn>
Date: Fri, 29 Jul 2022 10:44:19 +0800
Subject: [PATCH] modify displayed size after the installation and download of
 system update completed

---
 plugins/security-updates/upgrade/src/appupdate.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/plugins/security-updates/upgrade/src/appupdate.cpp b/plugins/security-updates/upgrade/src/appupdate.cpp
index 14734b0..ad4153e 100644
--- a/plugins/security-updates/upgrade/src/appupdate.cpp
+++ b/plugins/security-updates/upgrade/src/appupdate.cpp
@@ -393,7 +393,7 @@ void AppUpdateWid::updateAppUi(QString name)
     QFontMetrics fontWidth(someInfoEdit->font());//得到每个字符的宽度
     QString StrMsg = fontWidth.elidedText(chlog, Qt::ElideRight,600);//最大宽度
     someInfoEdit->append(StrMsg);
-    if(appAllMsg.msg.allSize == 0)
+    if(appAllMsg.msg.allSize == 0 || appAllMsg.packageSize == 0)
     {
         someInfoEdit->append(tr("Download size:")+QString(modifySizeUnit(appAllMsg.packageSize)));
 //        someInfoEdit->append(tr("下载大小：")+QString(modifySizeUnit(appAllMsg.packageSize)));
-- 
2.33.0

