From d0e9549cf4c08d0566bd3656b49a3c9e73d72383 Mon Sep 17 00:00:00 2001
From: myshow <296570182@qq.com>
Date: Tue, 1 Dec 2020 15:31:10 +0800
Subject: [PATCH 5/5] =?UTF-8?q?fix-effects-mode-not-available-bug=20?=
 =?UTF-8?q?=E4=BF=AE=E5=A4=8D=E7=89=B9=E6=95=88=E6=A8=A1=E5=BC=8F=E4=B8=8D?=
 =?UTF-8?q?=E5=8F=AF=E7=94=A8=E7=9A=84=E9=97=AE=E9=A2=98?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 plugins/personalized/theme/theme.cpp | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/plugins/personalized/theme/theme.cpp b/plugins/personalized/theme/theme.cpp
index a62cf4a..5e9d066 100644
--- a/plugins/personalized/theme/theme.cpp
+++ b/plugins/personalized/theme/theme.cpp
@@ -536,6 +536,7 @@ void Theme::initConnection() {
     connect(effectSwitchBtn, &SwitchButton::checkedChanged, [this](bool checked) {
         if (!checked) {
             personliseGsettings->set(PERSONALSIE_TRAN_KEY, 1.0);
+            ui->tranSlider->setValue(100);
         }
         // 提供给外部监听特效接口
         personliseGsettings->set(PERSONALSIE_EFFECT_KEY, checked);
@@ -657,7 +658,7 @@ void Theme::writeKwinSettings(bool change, QString theme, bool effect) {
         kwinSettings->setValue("kwin4_effect_translucencyEnabled", false);
         kwinSettings->setValue("zoomEnabled", false);
         kwinSettings->endGroup();
-#if QT_VERSION <= QT_VERSION_CHECK(5, 12, 0)
+#if QT_VERSION <= QT_VERSION_CHECK(5, 6, 0)
 
 #else
         for (int i = 0; i < effectList.length(); i++) {
@@ -676,7 +677,7 @@ void Theme::writeKwinSettings(bool change, QString theme, bool effect) {
         kwinSettings->setValue("kwin4_effect_translucencyEnabled", true);
         kwinSettings->setValue("zoomEnabled", true);
         kwinSettings->endGroup();
-#if QT_VERSION <= QT_VERSION_CHECK(5, 12, 0)
+#if QT_VERSION <= QT_VERSION_CHECK(5, 6, 0)
 
 #else
         // 开启模糊特效：
-- 
2.29.2.windows.2

